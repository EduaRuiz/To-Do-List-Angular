<!-- <div class="container">
  <mat-accordion>
    <mat-expansion-panel [expanded]="panelExpanded" (opened)="onPanelOpen()" (closed)="onPanelClose()">
      <mat-expansion-panel-header>
        <mat-panel-title>{{ title }}</mat-panel-title>
        <mat-panel-description>{{ description }}</mat-panel-description>
      </mat-expansion-panel-header>
      <div [formGroup]="formGroup">
        <mat-list role="list">
          <ng-container formArrayName="itemsArray" *ngFor="let item of itemsArray.controls; let i = index">
            <mat-list-item [formGroupName]="i">
              <mat-checkbox formControlName="isChecked" (click)="change(i)">
              </mat-checkbox>
              <mat-form-field>
                <input type="text" matInput formControlName="value" (change)="change(i)" (keydown.enter)="change(i)">
              </mat-form-field>
              <button mat-icon-button (click)="deleteItem(i)" [disabled]="item.get('isChecked')?.value">
                <mat-icon fontIcon="close"></mat-icon>
              </button>
            </mat-list-item>
          </ng-container>
          <mat-list-item>
            <mat-form-field>
              <input matInput [formControlName]="'newItem'" placeholder="New Item" (keydown.enter)="addItem()">
            </mat-form-field>
            <button mat-icon-button (click)="addItem()" [disabled]="alreadyExist()">
              <mat-icon fontIcon="add"></mat-icon>
            </button>
          </mat-list-item>
        </mat-list>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div> -->


<!-- <div class="container">
  <mat-accordion>
    <mat-expansion-panel [expanded]="panelExpanded" (opened)="onPanelOpen()" (closed)="onPanelClose()">
      <mat-expansion-panel-header>
        <mat-panel-title>{{ title }}</mat-panel-title>
        <mat-panel-description>{{ description }}</mat-panel-description>
      </mat-expansion-panel-header>
      <div [formGroup]="formGroup">

        <table mat-table [dataSource]="itemList" class="mat-elevation-z8 demo-table">
          <ng-container matColumnDef="demo-position">
            <th mat-header-cell *matHeaderCellDef> No. </th>
            <td mat-cell *matCellDef="let item"> {{ itemList.indexOf(item) + 1 }} </td>
          </ng-container>

          <ng-container matColumnDef="demo-name">
            <th mat-header-cell *matHeaderCellDef> Task </th>
            <td mat-cell *matCellDef="let item">
              <mat-form-field appearance="fill" style="flex: 1;width: 100%;">
                <input type="text" matInput>
              </mat-form-field>
            </td>
          </ng-container>

          <ng-container matColumnDef="demo-weight">
            <th mat-header-cell *matHeaderCellDef> Date </th>
            <td mat-cell *matCellDef="let item"> {{item.updatedAt| date: 'medium'}} </td>
          </ng-container>

          <ng-container matColumnDef="demo-symbol">
            <th mat-header-cell *matHeaderCellDef> Symbol </th>
            <td mat-cell *matCellDef="let item"> 
              <mat-checkbox [checked]="item.value"></mat-checkbox>
            </td>
          </ng-container>

          <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef> Remove </th>
            <td mat-cell *matCellDef="let item"> 
              <button mat-icon-button >
                <mat-icon fontIcon="close"></mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div> -->

<div class="container">
  <mat-accordion>
    <mat-expansion-panel [expanded]="panelExpanded" (opened)="onPanelOpen()" (closed)="onPanelClose()">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ title }}
        </mat-panel-title>
        <mat-panel-description>
          {{ description }}
          <div *ngIf="badge>0" matBadge="{{badge}}" matBadgeOverlap="false" class="badge-container"></div>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-container [formGroup]="formGroup">

        <mat-grid-list cols="12" rowHeight="90px">
          <mat-grid-tile [colspan]="12" [rowspan]="1" class="mat-grid-tile-add">

            <mat-form-field appearance="outline" class="example-full-width" style="width: 100%;">
              <mat-label>New Item</mat-label>
              <mat-icon matPrefix>check</mat-icon>
              <input type="tel" matInput [formControlName]="'newItem'" placeholder="New Item"
                (keydown.enter)="addItem()">
              <button mat-icon-button (click)="addItem()" aria-label="Clear" [disabled]="alreadyExist()" matSuffix>
                <mat-icon>add</mat-icon>
              </button>
            </mat-form-field>


          </mat-grid-tile>
        </mat-grid-list>
        <mat-progress-bar mode="determinate" value="{{progress}}"></mat-progress-bar>
        <br>

        <ng-container formArrayName="itemsArray" *ngFor="let item of itemsArray.controls; let i = index">
          <ng-container [formGroupName]="i">
            <mat-grid-list cols="12" rowHeight="60px">
              <mat-grid-tile [colspan]="1" [rowspan]="1" class="mat-grid-tile-check">
                <mat-checkbox formControlName="isChecked" (click)="change(i)">
                </mat-checkbox>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="10" [rowspan]="1" class="mat-grid-tile-value">
                <mat-form-field appearance="outline" style="width: 100%;top: 0;position: absolute;">
                  <input type="text" matInput formControlName="value" (change)="change(i)" (keydown.enter)="change(i)">
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1" class="mat-grit-tile-delete">
                <button mat-icon-button (click)="deleteItem(i)" [disabled]="item.get('isChecked')?.value">
                  <mat-icon fontIcon="close"></mat-icon>
                </button>
              </mat-grid-tile>
            </mat-grid-list>
          </ng-container>
        </ng-container>



      </ng-container>
    </mat-expansion-panel>
  </mat-accordion>
</div>